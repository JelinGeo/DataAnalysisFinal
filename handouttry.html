<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jelin George">
<meta name="keywords" content="summary statistics, R programming, data analysis, data visualisation, data summarisation">
<meta name="description" content="SUMMARY STATISTICS AND TECHNIQUES IN R">

<title>The Importance of Summary Statistics and Techniques for Creating Them in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="handouttry_files/libs/clipboard/clipboard.min.js"></script>
<script src="handouttry_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="handouttry_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="handouttry_files/libs/quarto-html/popper.min.js"></script>
<script src="handouttry_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="handouttry_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="handouttry_files/libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="handouttry_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="handouttry_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="handouttry_files/libs/bootstrap/bootstrap-0b4f8f062259680727f571f44257d5af.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="_extensions/wjschne/apaquarto/apa.css">
<link rel="stylesheet" href="styles.css">
</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#key-measures-in-summary-statistics" id="toc-key-measures-in-summary-statistics" class="nav-link active" data-scroll-target="#key-measures-in-summary-statistics">Key Measures in Summary Statistics</a></li>
  <li><a href="#summarizing-data-frames" id="toc-summarizing-data-frames" class="nav-link" data-scroll-target="#summarizing-data-frames">Summarizing Data Frames</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#affadative" id="toc-affadative" class="nav-link" data-scroll-target="#affadative">Affadative</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="handouttry.pdf"><i class="bi bi-file-pdf"></i>Typst (apaquarto)</a></li><li><a href="handouttry.pdf"><i class="bi bi-file-pdf"></i>PDF (apaquarto)</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">




<br>

<br>

<section id="title" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">The Importance of Summary Statistics and Techniques for Creating Them in R</h1>
<div class="Author">
<br>

<p>Jelin George</p>
<p>International Management, M.A., Hochschule Fresenius - University of Applied Science</p>
</div>
<br>

<br>

</section>
<section id="author-note" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Author Note</h1>
<p>Jelin George <img src="_extensions/wjschne/apaquarto/ORCID-iD_icon-vector.svg" id="orchid" class="img-fluid" style="width:4.23mm" alt="Orcid ID Logo: A green circle with white letters ID"> <a href="https://orcid.org/0000-0000-0000-0001">https://orcid.org/0000-0000-0000-0001</a></p>
<p>The authors have no conflicts of interest to disclose.</p>
<p>Correspondence concerning this article should be addressed to Jelin George, International Management, M.A., Hochschule Fresenius - University of Applied Science, Email: <a href="mailto:george.jelin@stud-hs.fresenius.de">george.jelin@stud-hs.fresenius.de</a></p>
<br>
</section>
<section id="abstract" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Abstract</h1>
<div class="AbstractFirstParagraph">
<p>This document presents a concise overview of summary statistics and their importance in R. Summary statistics - such as mean, median, standard deviation, and frequency counts - capture the key features of a dataset, enabling quick exploration and interpretation. R provides powerful functions and visualization tools to efficiently compute and present these statistics, making them essential for simplifying data, identifying patterns, and supporting informed analysis and decision-making.</p>
</div>
<p><em>Keywords</em>: summary statistics, R programming, data analysis, data visualisation, data summarisation</p>
<br>
</section>
<section id="firstheader" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">The Importance of Summary Statistics and Techniques for Creating Them in R</h1>
<p><br></p>
<p>Summary statistics are numerical values that describe the main features of a dataset, such as its center and spread. They simplify complex data into easily interpretable numbers, offering quick insights into trends and variability, and serve as a foundation for further analysis. These statistics provide a snapshot of the data, facilitating initial exploration, quality checks, and communication of results.</p>
<p>R offers a rich ecosystem of functions and packages - such as summary(), dplyr::summarise(), and visualization tools like histograms and boxplots - that streamline the computation and presentation of summary statistics for both numeric and categorical data. Their importance lies in simplifying large datasets, revealing patterns and outliers, and laying the groundwork for deeper statistical analyses and informed decision-making.</p>
<p>As the first and often most critical step in any analytical workflow, summary statistics in R empower analysts and researchers to understand, compare, and communicate data-driven insights with clarity and precision.</p>
<p>Summary statistics can be typically divided into:</p>
<ol type="1">
<li><p><strong>Descriptive statistics</strong>: Summarize the main features of a dataset (e.g., mean, median, mode). <em>This will be our focus here.</em></p></li>
<li><p><strong>Inferential statistics</strong>: Make predictions or inferences about a population based on a sample (not the focus here).</p></li>
</ol>
<p>I would like to highlight a book, <em>Making sense of statistics: A conceptual overview</em>, <span class="citation" data-cites="oh2023making">(<a href="#ref-oh2023making" role="doc-biblioref">Oh &amp; Pyrczak, 2023</a>)</span> which offers a clear and accessible introduction to key statistical concepts for beginners. The book focuses on building conceptual understanding of both descriptive and inferential statistics, using simple explanations, practical examples, and step-by-step guidance. It is designed to help students from any discipline gain confidence in applying statistics to research and interpreting data effectively.</p>
<p><br></p>
</section>
<section id="key-measures-in-summary-statistics" class="level1">
<h1>Key Measures in Summary Statistics</h1>
<ul>
<li><strong>Measures of Central Tendency</strong>: Central tendency measures indicate where most values in a dataset fall.</li>
<li><strong>Measures of Dispersion</strong>: Dispersion measures describe the spread of data.</li>
<li><strong>Measures of Shape and Distribution</strong>: Describe the overall pattern and characteristics of how data values are distributed within a dataset.</li>
<li><strong>Visualization tools</strong>: Histogram and boxplot are tools to help understand distribution of data better.</li>
<li><strong>Frequency table</strong>: It shows how often each value or category appears in a dataset, making it easy to spot common or rare values and summarize the data.</li>
<li><strong>Cross-tabulations</strong> (contingency tables): It shows how two or more categorical variables are related by displaying the count of observations for each combination of categories.</li>
</ul>
<p>Watch this <a href="https://www.youtube.com/watch?v=yoPGwvUzjgQ"><strong>tutorial video</strong></a> on descriptive statistics in R to get you started. Additionally, the YouTube videos listed here may be helpful for understanding the code chunks <span class="citation" data-cites="walker2023gtsummary">(<a href="#ref-walker2023gtsummary" role="doc-biblioref">Walker, 2023</a>)</span> <span class="citation" data-cites="dre2024gentle">(<a href="#ref-dre2024gentle" role="doc-biblioref">Videos, 2024</a>)</span>.</p>
<p><br></p>
</section>
<section id="summarizing-data-frames" class="level1">
<h1>Summarizing Data Frames</h1>
<p>We can summarize entire datasets by calculating statistics like mean, median, minimum, maximum, standard deviation, and counts for each variable. This provides a clear overview of the data’s structure and key features.</p>
<p>Practical application: Apply summary statistics functions to the Star Wars dataset. Use functions such as summary(), mean(), median(), sd(), and others to explore key variables like height, mass, and age. This will help you quickly understand the central tendencies, variability, and distribution patterns within the Star Wars data frame. Watch this YouTube video <a href="https://www.youtube.com/watch?v=4vSfbz9YMa0">Return of the Star Wars dataset</a> to understand the details of the dataset.</p>
<p>Furthermore, read <a href="https://modernstatisticswithr.com/index.html">Modern Statistics with R</a> to understand essential tools and techniques in contemporary statistical data analysis, using the R programming language. The book features numerous examples and over 200 exercises with worked solutions. The online version is freely available and regularly updated, with downloadable datasets for hands-on learning.</p>
<p><br></p>
</section>
<section id="limitations" class="level1">
<h1>Limitations</h1>
<p>The future of summary statistics is shaped by growing data complexity, computational advances, and artificial intelligence. As noted in <span class="citation" data-cites="oscgarden2023bootstrapping">(<a href="#ref-oscgarden2023bootstrapping" role="doc-biblioref">Garden, 2023</a>)</span>, summary statistics are increasingly combined with methods like bootstrapping and machine learning to handle complex data. AI is automating and personalizing summaries <span class="citation" data-cites="datatas2025future">(<a href="#ref-datatas2025future" role="doc-biblioref">Datatas, 2025</a>)</span>, while enhanced visual tools make data exploration more intuitive <span class="citation" data-cites="potter2010visualizing">(<a href="#ref-potter2010visualizing" role="doc-biblioref">Potter et al., 2010</a>)</span>. <span class="citation" data-cites="fan2014challenges">(<a href="#ref-fan2014challenges" role="doc-biblioref">Fan et al., 2014</a>)</span> highlight the need for new frameworks to address big data challenges, and <span class="citation" data-cites="gelman2024stat50">(<a href="#ref-gelman2024stat50" role="doc-biblioref">Gelman &amp; Vehtari, 2024</a>)</span> emphasize ongoing methodological innovation.</p>
<p>In sum, summary statistics are evolving into dynamic, automated tools essential for understanding large and complex datasets.</p>
<p><br></p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Summary statistics are fundamental to any data analysis process, serving as the essential first step in understanding and interpreting datasets. In R, summary statistics provide a concise overview of data distributions, central tendencies, and variability, enabling analysts to quickly assess data quality, detect anomalies, and guide subsequent analytical decisions. The flexibility and power of R-through core functions like summary(), mean(), sd(), and packages such as dplyr, to efficiently compute and customize statistical summaries for both ungrouped and grouped data.</p>
<p>According to <span class="citation" data-cites="lane2013descriptive">(<a href="#ref-lane2013descriptive" role="doc-biblioref">Lane, 2013</a>)</span>, using R’s tools to automate calculations of summary statistics-such as mean, median, standard deviation, range, and percentiles-enables users to efficiently produce both overall and group-wise summaries. This not only streamlines exploratory data analysis but also establishes a strong basis for advanced statistical modeling and hypothesis testing. As Lane emphasizes, mastering summary statistics in R allows analysts to extract meaningful insights, make better decisions, and clearly communicate results across various fields of research and business analytics.</p>
<p><br></p>
</section>
<section id="references" class="level1">
<h1>References</h1>
<!-- References will auto-populate in the refs div below -->
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-datatas2025future" class="csl-entry" role="listitem">
Datatas. (2025, April 14). <em>The future of AI-generated data summarization for large reports</em>. <a href="https://datatas.com/the-future-of-ai-generated-data-summarization-for-large-reports/">https://datatas.com/the-future-of-ai-generated-data-summarization-for-large-reports/</a>
</div>
<div id="ref-fan2014challenges" class="csl-entry" role="listitem">
Fan, J., Han, F., &amp; Liu, H. (2014). Challenges of big data analysis. <em>National Science Review</em>, <em>1</em>(2), 293–314. <a href="https://doi.org/10.1093/nsr/nwt032">https://doi.org/10.1093/nsr/nwt032</a>
</div>
<div id="ref-oscgarden2023bootstrapping" class="csl-entry" role="listitem">
Garden, O. (2023, November 27). <em>The 8 most important statistical ideas: Bootstrapping and simulation-based inference</em>. <a href="https://osc.garden/blog/bootstrapping-and-simulation-based-inference/">https://osc.garden/blog/bootstrapping-and-simulation-based-inference/</a>
</div>
<div id="ref-gelman2024stat50" class="csl-entry" role="listitem">
Gelman, A., &amp; Vehtari, A. (2024). <em>What are the most important statistical ideas of the past 50 years?</em> <a href="https://www.stat.columbia.edu/~gelman/research/unpublished/stat50.pdf">https://www.stat.columbia.edu/~gelman/research/unpublished/stat50.pdf</a>
</div>
<div id="ref-lane2013descriptive" class="csl-entry" role="listitem">
Lane, D. M. (2013). Descriptive statistics. In <em>Introduction to statistics</em>. Rice University. <a href="https://onlinestatbook.com/2/introduction/descriptive.html">https://onlinestatbook.com/2/introduction/descriptive.html</a>
</div>
<div id="ref-oh2023making" class="csl-entry" role="listitem">
Oh, D. M., &amp; Pyrczak, F. (2023). <em>Making sense of statistics: A conceptual overview</em>. Routledge.
</div>
<div id="ref-potter2010visualizing" class="csl-entry" role="listitem">
Potter, K., Kniss, J., Riesenfeld, R., &amp; Johnson, C. R. (2010). Visualizing summary statistics and uncertainty. <em>Computer Graphics Forum</em>, <em>29</em>(3), 823–832. <a href="https://www.sci.utah.edu/~kpotter/publications/potter-2010-VSSU.pdf">https://www.sci.utah.edu/~kpotter/publications/potter-2010-VSSU.pdf</a>
</div>
<div id="ref-dre2024gentle" class="csl-entry" role="listitem">
Videos, D. E. R. (2024). <em>Gentle r #4: Basic summary statistics in r with r studio [video]</em>. YouTube. <a href="https://www.youtube.com/watch?v=8XFmPP93w_Y">https://www.youtube.com/watch?v=8XFmPP93w_Y</a>
</div>
<div id="ref-walker2023gtsummary" class="csl-entry" role="listitem">
Walker, L. (2023). <em>Easy summary tables in r with gtsummary [video]</em>. YouTube. <a href="https://www.youtube.com/watch?v=gohF7pp2XCg">https://www.youtube.com/watch?v=gohF7pp2XCg</a>
</div>
</div>
<p><br></p>
</section>
<section id="affadative" class="level1">
<h1>Affadative</h1>
<p>I hereby affirm that this submitted paper was authored unaided and solely by me. Additionally, no other sources than those in the reference list were used. Parts of this paper, including tables and figures, that have been taken either verbatim or analogously from other works have in each case been properly cited with regard to their origin and authorship. This paper either in parts or in its entirety, be it in the same or similar form, has not been submitted to any other examination board and has not been published.</p>
<p>I acknowledge that the university may use plagiarism detection software to check my thesis. I agree to cooperate with any investigation of suspected plagiarism and to provide any additional information or evidence requested by the university.</p>
<p>Checklist:</p>
<ul class="task-list">
<li><label><input type="checkbox">The handout contains 3-5 pages of text.</label></li>
<li><label><input type="checkbox">The submission contains the Quarto file of the handout.</label></li>
<li><label><input type="checkbox">The submission contains the Quarto file of the presentation.</label></li>
<li><label><input type="checkbox">The submission contains the HTML file of the handout.</label></li>
<li><label><input type="checkbox">The submission contains the HTML file of the presentation.</label></li>
<li><label><input type="checkbox">The submission contains the PDF file of the handout.</label></li>
<li><label><input type="checkbox">The submission contains the PDF file of the presentation.</label></li>
<li><label><input type="checkbox" checked="">The title page of the presentation and the handout contain personal details (name, email, matriculation number).</label></li>
<li><label><input type="checkbox">The handout contains a abstract.</label></li>
<li><label><input type="checkbox">The presentation and the handout contain a bibliography, created using BibTeX with APA citation style.</label></li>
<li><label><input type="checkbox">Either the handout or the presentation contains R code that proof the expertise in coding.</label></li>
<li><label><input type="checkbox">The handout includes an introduction to guide the reader and a conclusion summarizing the work and discussing potential further investigations and readings, respectively.</label></li>
<li><label><input type="checkbox">All significant resources used in the report and R code development.</label></li>
<li><label><input type="checkbox">The filled out Affidavit.</label></li>
<li><label><input type="checkbox">A concise description of the successful use of Git and GitHub, as detailed here: <a href="https://github.com/hubchev/make_a_pull_request" class="uri">https://github.com/hubchev/make_a_pull_request</a>.</label></li>
<li><label><input type="checkbox">The link to the presentation and the handout published on GitHub.</label></li>
</ul>
<p>Jelin George, 28May2025, Cologne</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>